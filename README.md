# 갤럭시 워치 센서 데이터 (PPG/HR) 블루투스 전송 시스템

## 1. 프로젝트 개요

본 프로젝트는 삼성 갤럭시 워치(Wear OS)에 내장된 PPG(광용적맥파) 및 심박수(HR) 센서로부터 데이터를 실시간으로 수집하여, 블루투스 클래식(SPP) 통신을 통해 연결된 PC(컴퓨터)로 전송하는 시스템입니다.

원래 Empatica E4 기기를 사용하여 진행하던 감정 인식 연구에서 기기 사용이 중단되는 문제에 직면하여, 갤럭시 워치를 대체 센서로 활용하기 위해 개발되었습니다.

이 저장소는 다음 두 가지 주요 구성 요소를 포함합니다:

* **Wear OS 앱 (`wear-os-app/`):** 갤럭시 워치에서 실행되며 센서 데이터를 측정하고 PC로 전송하는 역할을 합니다.
* **Python 서버 (`python-server/`):** PC에서 실행되며 워치로부터 블루투스 연결을 수락하고 수신된 센서 데이터를 처리(예: CSV 저장, 실시간 그래프 표시)합니다.

## 2. 개발 배경

* 기존 연구용 장비(Empatica E4) 사용 불가 문제 발생 (API 차단).
* 고가의 대체 장비 구매 대신, 접근성이 좋은 갤럭시 워치 센서 활용 결정.
* 실시간 Raw PPG 데이터 전송 기능의 부재로 직접 앱 및 서버 개발 착수.

## 3. 시스템 구성 요소

### 3.1. Wear OS 앱 (`wear-os-app/`)

* **기능:**
    * Samsung Health SDK 연동 (HR 및 PPG 데이터 접근).
    * 실시간 HR/IBI 및 Raw PPG(Green/IR/Red) 데이터 측정 (단, 기기/SDK 지원 범위 내).
    * 측정된 데이터를 JSON 형식으로 변환.
    * 지정된 PC와 블루투스 SPP 연결 및 데이터 전송.
    * 연결 상태, 수신 데이터, 측정 제어 UI 제공.
* **개발 환경:** Android Studio, Kotlin, Wear OS Compose, Samsung Health SDK.
* **상세 설정 및 빌드:** [`wear-os-app/README.md`](./wear-os-app/README.md) 참조.

### 3.2. Python 서버 (`python-server/`)

* **기능:**
    * Wear OS 앱으로부터 블루투스 SPP 연결 수락.
    * 수신된 JSON 데이터 파싱.
    * 수신 데이터를 CSV 파일로 저장.
* **개발 환경:** Python 3, PyBluez (또는 다른 Bluetooth 라이브러리)
* **상세 설정 및 실행:** [`python-server/README.md`](./python-server/README.md) 참조.

## 4. 전체 시스템 설정 및 실행

1.  **PC-워치 페어링:** 데이터를 수신할 PC와 갤럭시 워치를 블루투스로 미리 페어링합니다.
2.  **Python 서버 실행:** PC에서 `python-server/` 폴더의 서버 스크립트를 실행합니다. (상세 내용은 해당 폴더 README 참조)
3.  **Wear OS 앱 설치 및 실행:** `wear-os-app/` 폴더의 앱을 빌드하여 워치에 설치하고 실행합니다. (상세 내용은 해당 폴더 README 참조)
4.  **권한 허용:** 워치 앱 실행 시 필요한 권한(신체 센서, 주변 기기)을 허용합니다.
5.  **블루투스 연결:** 워치 앱에서 [PC 연결] 버튼을 눌러 실행 중인 Python 서버에 연결합니다.
6.  **측정 시작:** 워치 앱에서 [측정 시작] 버튼을 눌러 센서 데이터 수집 및 전송을 시작합니다.
7.  **데이터 확인:** PC 서버의 콘솔 로그, 생성된 CSV 파일을을 통해 데이터 수신을 확인합니다.

